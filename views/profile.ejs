<%- include('./partials/header.ejs', { user: user }) %>

<body>
    <div class="mainWrapper">
        <%- include('./partials/sideNav.ejs') %>

        <div class="mainContent">
            <div class="profileInfo">
                <img src="<%= profileUser.profilePic %>" id = "profilePicture" alt="">
                <div id="profileText">
                    <h3>[ <%= profileUser.username %> ]</h3>
                    <% 
                    let totalLikes = 0;
                    photos.forEach((photo) => {
                        totalLikes += photo.likes
                    }) 
                    %>
                    <p><%= photos.length %> posts<span style = "margin: 0 15px 0 25px"><%= totalLikes %> total likes</span> <span style = "margin: 0 15px 0 10px">512 following</span></p>
                    <p style = "color: rgb(209, 209, 209)"><%= profileUser.name %></p>
                </div>
            </div>
            <h3 style = "text-align: center;">ALL PHOTOS</h3>
            <hr>
            
            <div class="photosWrapper">
            <% if(photos.length > 0) { %>
                <% photos.forEach((photo)=> { %>
                    <div id = "photoBlock">
                        <p id = "photoTitleOverlay"><%= photo.photoTitle %></p>
                        <img src="<%= photo.content %>" alt="" id = "photoContent">
                        <p id = "profilePhotoStats"><%= photo.likes %> likes<span style = "margin: 0 15px 0 25px"><%= photo.comments.length %> comments</span></p>
                    </div>
                    
                    
                <% }) %>
                <% } else { %> 
                    <h3 style = "color:rgb(128, 128, 128)">Hmm, it's looking pretty empty here...add some content and get the party started!</h3>
                    <% } %>
            </div>
    </div>

    </div>
    <script>
        const titles = document.querySelectorAll("#photoTitleOverlay")
        const photoBlock = document.querySelectorAll("#photoContent")
        const stats = document.querySelectorAll("#profilePhotoStats")

        console.log(titles)

        for(let i = 0; i < photoBlock.length; i++) {
            photoBlock[i].addEventListener("mouseover", ()=> {
                stats[i].style.bottom = "5px"
                stats[i].style.opacity = "1"
                titles[i].style.opacity = "1"
                titles[i].style.top = "3px"

            })
        }

        for(let i = 0; i < photoBlock.length; i++) {
            photoBlock[i].addEventListener("mouseout", ()=> {
                stats[i].style.bottom = "0px"
                stats[i].style.opacity = "0"
                titles[i].style.opacity = "0"
                titles[i].style.top = "-5px"

            })
        }
    </script>
</body>
